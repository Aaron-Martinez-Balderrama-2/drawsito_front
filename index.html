<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>Drawsito UML</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="estilos.css"/>
</head>
<body>
<header class="barra">
  <strong>Drawsito</strong>
  <button id="btn_guardar">Guardar</button>
  <button id="btn_cargar">Cargar</button>
  <input id="inp_id" placeholder="id a cargar (p.ej. dibujo-20251021-210000)" size="34"/>
  <span class="sep"></span>
  <label class="zoomlbl">Zoom
    <select id="sel_zoom">
      <option>50%</option><option>75%</option><option selected>100%</option>
      <option>125%</option><option>150%</option><option>200%</option>
    </select>
  </label>
</header>

<main class="principal">
  <!-- Paleta -->
  <aside class="paleta">
    <h4>Paleta</h4>
    <div class="pieza" draggable="true" data-tipo="clase">üß± Clase UML</div>
    <div class="pieza" draggable="true" data-tipo="texto">üîñ Texto</div>
    <p class="nota">Arrastra una pieza al lienzo. Doble clic para editar. Enter agrega filas. Arrastra desde los c√≠rculos azules para conectar.</p>
  </aside>

  <!-- Lienzo -->
  <section class="zona" id="zona_canvas">
    <canvas id="lienzo"></canvas>

    <!-- Edici√≥n inline de t√≠tulos/filas -->
    <input id="editor_inline"/>

    <!-- Editor flotante de aristas -->
    <form id="editor_arista" class="pop" autocomplete="off">
      <div class="fila">
        <label>Etiqueta</label>
        <input type="text" id="ea_lbl" placeholder="relaci√≥n (opcional)"/>
      </div>
      <div class="fila2">
        <div>
          <label>Origen</label>
          <input type="text" id="ea_o" placeholder="1, 0..1, 0..*, *..*, etc."/>
        </div>
        <div>
          <label>Destino</label>
          <input type="text" id="ea_d" placeholder="1, 0..1, 0..*, *..*, etc."/>
        </div>
      </div>
      <div class="fila2">
        <div style="width:140px">
          <label>Tama√±o texto</label>
          <input type="number" id="ea_sz" min="10" max="24" step="1" value="12"/>
        </div>
        <div class="nota" style="align-self:end">Afecta etiqueta y cardinalidades</div>
      </div>
      <div class="acciones">
        <button type="submit">OK</button>
        <button type="button" id="ea_cancel">Cancelar</button>
      </div>
    </form>

    <button id="btn_borrar_sel">üóë Eliminar</button>
  </section>

  <!-- Panel derecho -->
  <aside class="panel">
    <h4>Opciones</h4>
    <div class="grupo">
      <label><input type="checkbox" id="opt_ver_grid" checked> Cuadr√≠cula</label><br/>
      <label><input type="checkbox" id="opt_ver_pag" checked> Vista de la p√°gina</label><br/>
      <label><input type="checkbox" id="opt_conectores" checked> Puntos de conexi√≥n</label>
    </div>
    <div class="grupo">
      <div class="etq">Tama√±o del papel</div>
      <select id="sel_papel">
        <option value="A4" selected>A4 (210 √ó 297 mm)</option>
        <option value="Letter">Carta (216 √ó 279 mm)</option>
      </select>
      <div class="fila">
        <label><input type="radio" name="ori" value="v" checked> Vertical</label>
        <label><input type="radio" name="ori" value="h"> Horizontal</label>
      </div>
      <small class="nota">La hoja se expande/contrae por bloques seg√∫n el contenido.</small>
    </div>

    <hr/>
    <div id="panel_clase" class="grupo" style="display:none">
      <h5>Clase UML</h5>
      <label class="etq">Nombre</label>
      <input type="text" id="clase_titulo" placeholder="Nombre de la clase"/>
      <div class="fila">
        <button id="btn_add_atr">+ Atributo</button>
        <button id="btn_add_met">+ M√©todo</button>
      </div>
      <small class="nota">Consejo: doble clic para editar. Vac√≠o + Enter elimina fila.</small>
    </div>
  </aside>
</main>

<div class="ayuda">
  Ctrl + rueda = Zoom ‚Ä¢ Backspace/Del elimina ‚Ä¢ Doble clic en l√≠nea = editar etiqueta/cardinalidades
</div>

<script>window.DRAWSITO_CONFIG={ api:"/proyecto/drawsito_back/api.php" };</script>
<script src="core/estado.js"></script>
<script src="core/pagina.js"></script>
<script src="core/render.js"></script>
<script src="core/interaccion.js"></script>
<script src="app.js"></script>
</body>
</html>
